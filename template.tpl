___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "categories": [
    "ANALYTICS"
  ],
  "displayName": "Amplitude Analytics",
  "brand": {
    "id": "github.com_amplitude",
    "displayName": "amplitude",
    "thumbnail": "data:image/png;base64,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\u003d\u003d"
  },
  "description": "Template for Amplitude Analytics. The tag utilizes the Amplitude JavaScript SDK for data collection.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "apiKey",
    "displayName": "API Key",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "help": "You can find the API Key by browsing to Settings for your organization in the Amplitude user interface. By creating or selecting a created project, you can find the API key for copy-pasting in the project settings. See \u003ca href\u003d\"https://help.amplitude.com/hc/en-us/articles/207108137-Quick-start-guide-Create-your-organization-and-first-project\"\u003ethis page\u003c/a\u003e for more information.",
    "alwaysInSummary": true
  },
  {
    "type": "SELECT",
    "name": "type",
    "displayName": "Tag Type",
    "selectItems": [
      {
        "value": "setOptOut",
        "displayValue": "setOptOut"
      },
      {
        "value": "setSessionId",
        "displayValue": "setSessionId"
      },
      {
        "value": "setUserId",
        "displayValue": "setUserId"
      },
      {
        "value": "setUserProperties",
        "displayValue": "setUserProperties"
      },
      {
        "value": "clearUserProperties",
        "displayValue": "clearUserProperties"
      },
      {
        "value": "setGroup",
        "displayValue": "setGroup"
      },
      {
        "value": "regenerateDeviceId",
        "displayValue": "regenerateDeviceId"
      },
      {
        "value": "setDeviceId",
        "displayValue": "setDeviceId"
      },
      {
        "value": "setVersionName",
        "displayValue": "setVersionName"
      },
      {
        "value": "event",
        "displayValue": "Event"
      },
      {
        "value": "revenue",
        "displayValue": "Revenue"
      },
      {
        "value": "identify",
        "displayValue": "Identify"
      }
    ],
    "simpleValueType": true,
    "defaultValue": "event"
  },
  {
    "type": "CHECKBOX",
    "name": "setOptOut",
    "checkboxText": "Opt current user out of tracking.",
    "simpleValueType": true,
    "help": "Uncheck the box to cancel any existing opt-out for the current user. \u003ca href\u003d\"https://amplitude.github.io/Amplitude-JavaScript/#amplitudeclientsetoptout\"\u003eMore information\u003c/a\u003e.",
    "defaultValue": true,
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "setOptOut",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "setSessionId",
    "displayName": "Session ID",
    "simpleValueType": true,
    "valueUnit": "milliseconds (UNIX time)",
    "valueHint": "e.g. 1634720393000",
    "valueValidators": [
      {
        "type": "REGEX",
        "args": [
          "^\\d{13}$"
        ],
        "errorMessage": "You must provide the session ID as a UNIX timestamp (milliseconds since Jan 1, 1970).",
        "enablingConditions": []
      },
      {
        "type": "NON_EMPTY"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "setSessionId",
        "type": "EQUALS"
      }
    ],
    "help": "Note! You should not set the session ID manually unless you know exactly what you are doing. \u003ca href\u003d\"https://amplitude.github.io/Amplitude-JavaScript/#amplitudeclientsetsessionid\"\u003eMore information\u003c/a\u003e."
  },
  {
    "type": "TEXT",
    "name": "setUserId",
    "displayName": "User ID",
    "simpleValueType": true,
    "help": "Leave empty to reset the User ID (sets it to \u003cstrong\u003enull\u003c/strong\u003e). \u003ca href\u003d\"https://amplitude.github.io/Amplitude-JavaScript/#amplitudeclientsetuserid\"\u003eMore information\u003c/a\u003e.",
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "setUserId",
        "type": "EQUALS"
      }
    ],
    "valueHint": "Leave untouched to reset"
  },
  {
    "type": "SIMPLE_TABLE",
    "name": "setUserProperties",
    "simpleTableColumns": [
      {
        "defaultValue": "",
        "displayName": "Property Name",
        "name": "name",
        "type": "TEXT",
        "isUnique": true,
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ]
      },
      {
        "defaultValue": "",
        "displayName": "Property Value",
        "name": "value",
        "type": "TEXT"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "setUserProperties",
        "type": "EQUALS"
      }
    ],
    "newRowButtonText": "Add User Property"
  },
  {
    "type": "LABEL",
    "name": "clearUserProperties",
    "displayName": "Clears all user properties for the current user. \u003cstrong\u003eWarning!\u003c/strong\u003e This is irreversible! \u003ca href\u003d\"https://amplitude.github.io/Amplitude-JavaScript/#amplitudeclientclearuserproperties\"\u003eMore information\u003c/a\u003e.",
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "clearUserProperties",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "setGroup",
    "subParams": [
      {
        "type": "TEXT",
        "name": "groupType",
        "displayName": "Group Type",
        "simpleValueType": true,
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "groupName",
        "displayName": "Group Name(s)",
        "simpleValueType": true,
        "help": "Add a single group name (e.g. \u003cstrong\u003e15\u003c/strong\u003e) or a comma-separated list (e.g. \u003cstrong\u003e2,12,24\u003c/strong\u003e) of group names.",
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ]
      }
    ],
    "groupStyle": "NO_ZIPPY",
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "setGroup",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "LABEL",
    "name": "regenerateDeviceId",
    "displayName": "Regenerates a new random deviceId for current user. \u003cstrong\u003eWarning!\u003c/strong\u003e This is not recommended unless you know what you are doing. \u003ca href\u003d\"https://amplitude.github.io/Amplitude-JavaScript/#amplitudeclientregeneratedeviceid\"\u003eMore information\u003c/a\u003e.",
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "regenerateDeviceId",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "setDeviceId",
    "displayName": "Device ID",
    "simpleValueType": true,
    "help": "Set the Device ID for the current user. \u003cstrong\u003eWarning!\u003c/strong\u003e This is not recommended unless you know what you are doing. \u003ca href\u003d\"https://amplitude.github.io/Amplitude-JavaScript/#amplitudeclientsetdeviceid\"\u003eMore information\u003c/a\u003e.",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      },
      {
        "type": "REGEX",
        "args": [
          "^[^ .]+$"
        ],
        "errorMessage": "The device ID should be an alphanumeric string. You can\u0027t use the period (\".\") in the ID string."
      }
    ],
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "setDeviceId",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "setVersionName",
    "displayName": "Version Name",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "setVersionName",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "eventGroup",
    "displayName": "Event Options",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "RADIO",
        "name": "eventSetting",
        "radioItems": [
          {
            "value": "logEvent",
            "displayValue": "Log event"
          },
          {
            "value": "logEventWithGroups",
            "displayValue": "Log event with groups"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "logEvent"
      },
      {
        "type": "TEXT",
        "name": "eventType",
        "displayName": "Event Type",
        "simpleValueType": true,
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ]
      },
      {
        "type": "SIMPLE_TABLE",
        "name": "eventProperties",
        "displayName": "Event Properties",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Property Name",
            "name": "name",
            "type": "TEXT",
            "isUnique": false,
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ]
          },
          {
            "defaultValue": "",
            "displayName": "Property Value",
            "name": "value",
            "type": "TEXT"
          }
        ],
        "newRowButtonText": "Add Property"
      },
      {
        "type": "TEXT",
        "name": "eventTimestamp",
        "displayName": "Event Timestamp (optional)",
        "simpleValueType": true,
        "help": "Set to milliseconds since epoch (Jan 1, 1970).",
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "^\\d{13}$"
            ],
            "errorMessage": "You must provide the timestamp in milliseconds since epoch (UNIX time)."
          }
        ],
        "valueHint": "e.g. 1634722138000",
        "valueUnit": "milliseconds (UNIX time)",
        "enablingConditions": [
          {
            "paramName": "eventSetting",
            "paramValue": "logEvent",
            "type": "EQUALS"
          }
        ]
      },
      {
        "type": "SIMPLE_TABLE",
        "name": "eventGroups",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Group Type",
            "name": "groupType",
            "type": "TEXT",
            "isUnique": true,
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ]
          },
          {
            "defaultValue": "",
            "displayName": "Group Name",
            "name": "groupName",
            "type": "TEXT",
            "isUnique": true
          }
        ],
        "enablingConditions": [
          {
            "paramName": "eventSetting",
            "paramValue": "logEventWithGroups",
            "type": "EQUALS"
          }
        ],
        "newRowButtonText": "Add Group",
        "valueValidators": [
          {
            "type": "TABLE_ROW_COUNT",
            "args": [
              1
            ]
          }
        ]
      }
    ],
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "event",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "revenueGroup",
    "displayName": "Revenue Options",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "CHECKBOX",
        "name": "revenueFromVariable",
        "checkboxText": "Load Revenue object from a GTM variable",
        "simpleValueType": true,
        "help": "Choose a GTM variable that returns an \u003cstrong\u003eobject\u003c/strong\u003e with the following keys:\u003cul\u003e\u003cli\u003e\u003cstrong\u003eid\u003c/strong\u003e (required)\u003c/li\u003e\u003cli\u003e\u003cstrong\u003eprice\u003c/strong\u003e (required)\u003c/li\u003e\u003cli\u003equantity\u003c/li\u003e\u003cli\u003erevenueType\u003c/li\u003e\u003cli\u003eeventProperties\u003c/li\u003e\u003c/ul\u003e\u003ca href\u003d\"https://amplitude.github.io/Amplitude-JavaScript/Revenue\"\u003eMore information\u003c/a\u003e.",
        "subParams": [
          {
            "type": "SELECT",
            "name": "revenueVariable",
            "displayName": "",
            "macrosInSelect": true,
            "selectItems": [],
            "simpleValueType": true,
            "enablingConditions": [
              {
                "paramName": "revenueFromVariable",
                "paramValue": true,
                "type": "EQUALS"
              }
            ]
          }
        ]
      },
      {
        "type": "GROUP",
        "name": "revenueInput",
        "groupStyle": "NO_ZIPPY",
        "subParams": [
          {
            "type": "TEXT",
            "name": "revenueId",
            "displayName": "Product ID (required)",
            "simpleValueType": true,
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ]
          },
          {
            "type": "TEXT",
            "name": "revenuePrice",
            "displayName": "Product Price (required)",
            "simpleValueType": true,
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              },
              {
                "type": "REGEX",
                "args": [
                  "^\\d+(\\.\\d+)?$"
                ],
                "errorMessage": "Enter price as a number with decimals separated by a period (e.g. 15.99)."
              }
            ]
          },
          {
            "type": "TEXT",
            "name": "revenueQuantity",
            "displayName": "Product Quantity",
            "simpleValueType": true,
            "valueValidators": [
              {
                "type": "POSITIVE_NUMBER"
              }
            ]
          },
          {
            "type": "TEXT",
            "name": "revenueType",
            "displayName": "Revenue Type",
            "simpleValueType": true
          },
          {
            "type": "SIMPLE_TABLE",
            "name": "revenueEventProperties",
            "displayName": "Event Properties",
            "simpleTableColumns": [
              {
                "defaultValue": "",
                "displayName": "Property Name",
                "name": "name",
                "type": "TEXT",
                "isUnique": false,
                "valueValidators": [
                  {
                    "type": "NON_EMPTY"
                  }
                ]
              },
              {
                "defaultValue": "",
                "displayName": "Property Value",
                "name": "value",
                "type": "TEXT"
              }
            ],
            "newRowButtonText": "Add Property"
          }
        ],
        "enablingConditions": [
          {
            "paramName": "revenueFromVariable",
            "paramValue": false,
            "type": "EQUALS"
          }
        ]
      }
    ],
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "revenue",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "identifyGroup",
    "displayName": "Identify Settings",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "LABEL",
        "name": "identifyLabel",
        "displayName": "Add individual user property operations each as its own row in the table. You can add as many as you like, but note that you can only include a specific User Property in a single operation. The operations are executed in order. \u003ca href\u003d\"https://amplitude.github.io/Amplitude-JavaScript/Identify\"\u003eMore information\u003c/a\u003e.\u003cbr/\u003e\u003cbr/\u003e"
      },
      {
        "type": "SIMPLE_TABLE",
        "name": "userPropertyOperations",
        "simpleTableColumns": [
          {
            "defaultValue": "add",
            "displayName": "Method Call",
            "name": "command",
            "type": "SELECT",
            "selectItems": [
              {
                "value": "add",
                "displayValue": "Add"
              },
              {
                "value": "append",
                "displayValue": "Append"
              },
              {
                "value": "prepend",
                "displayValue": "Prepend"
              },
              {
                "value": "set",
                "displayValue": "Set"
              },
              {
                "value": "setOnce",
                "displayValue": "Set Once"
              },
              {
                "value": "unset",
                "displayValue": "Unset"
              },
              {
                "value": "preInsert",
                "displayValue": "Preinsert"
              }
            ]
          },
          {
            "defaultValue": "",
            "displayName": "User Property",
            "name": "userProperty",
            "type": "TEXT",
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ],
            "isUnique": true
          },
          {
            "defaultValue": "",
            "displayName": "Value",
            "name": "value",
            "type": "TEXT"
          }
        ],
        "newRowButtonText": "Add Operation"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "identify",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "initGroup",
    "displayName": "Initialization",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "TEXT",
        "name": "instanceName",
        "displayName": "Instance Name",
        "simpleValueType": true,
        "valueHint": "Default (blank)",
        "help": "Each \u003cstrong\u003einstance\u003c/strong\u003e is initialized just once per page. It doesn\u0027t hurt to add the initialization options to all your Amplitude tags, but for each instance name, only the first tag that fires will be considered for initialization options. To associate your tags with a specific instance, make sure you have this Instance Name field populated correctly for these ags. For more details, \u003ca href\u003d\"https://developers.amplitude.com/docs/javascript#initialization\"\u003esee this page\u003c/a\u003e."
      },
      {
        "type": "CHECKBOX",
        "name": "euData",
        "checkboxText": "EU Data Residency",
        "simpleValueType": true,
        "help": "Configure Amplitude to use EU Data Residency server zone. \u003ca href\u003d\"https://developers.amplitude.com/docs/javascript#eu-data-residency\"\u003eRead more here\u003c/a\u003e.",
        "defaultValue": false
      },
      {
        "type": "TEXT",
        "name": "initUserId",
        "displayName": "User ID",
        "simpleValueType": true,
        "help": "If you want, you can initialize the instance with a User ID, if already available. You can also use the \u003cstrong\u003esetUserId\u003c/strong\u003e command to initialize the User ID at a later time. For more details, \u003ca href\u003d\"https://developers.amplitude.com/docs/javascript#setting-user-id\"\u003esee this page\u003c/a\u003e.",
        "valueHint": "Not set"
      },
      {
        "type": "SELECT",
        "name": "initOptions",
        "displayName": "Initialization Options",
        "macrosInSelect": true,
        "selectItems": [
          {
            "value": "manual",
            "displayValue": "Set options manually"
          }
        ],
        "simpleValueType": true,
        "notSetText": "Use default values",
        "subParams": [],
        "help": "If you select \u003cstrong\u003eUse default values\u003c/strong\u003e, then the initialization is done with \u003ca href\u003d\"https://github.com/amplitude/Amplitude-JavaScript/blob/87e3a646e9947ba127e3bf758ee01ae1995f6c5c/src/options.js#L50\"\u003ethe default values\u003c/a\u003e.\u003cbr/\u003e\u003cbr/\u003e\nYou can also select a \u003cstrong\u003e{{GTM variable}}\u003c/strong\u003e from the list, which needs to return an object that has the key-value pairs you want to configure the instance with. You can find the key-value pairs following \u003ca href\u003d\"https://github.com/amplitude/Amplitude-JavaScript/blob/87e3a646e9947ba127e3bf758ee01ae1995f6c5c/src/options.js#L50\"\u003ethis example\u003c/a\u003e.\u003cbr/\u003e\u003cbr/\u003eFinally, you can \u003cstrong\u003eSet options manually\u003c/strong\u003e in the tag itself, by selecting the corresponding option."
      },
      {
        "type": "SIMPLE_TABLE",
        "name": "initManualOptions",
        "displayName": "",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Option key",
            "name": "key",
            "type": "SELECT",
            "selectItems": [
              {
                "value": "apiEndpoint",
                "displayValue": "apiEndpoint"
              },
              {
                "value": "batchEvents",
                "displayValue": "batchEvents"
              },
              {
                "value": "cookieExpiration",
                "displayValue": "cookieExpiration"
              },
              {
                "value": "sameSiteCookie",
                "displayValue": "sameSiteCookie"
              },
              {
                "value": "cookieForceUpgrade",
                "displayValue": "cookieForceUpgrade"
              },
              {
                "value": "deferInitialization",
                "displayValue": "deferInitialization"
              },
              {
                "value": "deviceIdFromUrlParam",
                "displayValue": "deviceIdFromUrlParam"
              },
              {
                "value": "domain",
                "displayValue": "domain"
              },
              {
                "value": "eventUploadPeriodMillis",
                "displayValue": "eventUploadPeriodMillis"
              },
              {
                "value": "eventUploadThreshold",
                "displayValue": "eventUploadThreshold"
              },
              {
                "value": "forceHttps",
                "displayValue": "forceHttps"
              },
              {
                "value": "includeFbclid",
                "displayValue": "includeFbclid"
              },
              {
                "value": "includeGclid",
                "displayValue": "includeGclid"
              },
              {
                "value": "includeReferrer",
                "displayValue": "includeReferrer"
              },
              {
                "value": "includeUtm",
                "displayValue": "includeUtm"
              },
              {
                "value": "language",
                "displayValue": "language"
              },
              {
                "value": "logLevel",
                "displayValue": "logLevel"
              },
              {
                "value": "logAttributionCapturedEvent",
                "displayValue": "logAttributionCapturedEvent"
              },
              {
                "value": "optOut",
                "displayValue": "optOut"
              },
              {
                "value": "onError",
                "displayValue": "onError"
              },
              {
                "value": "onExitPage",
                "displayValue": "onExitPage"
              },
              {
                "value": "plan",
                "displayValue": "plan"
              },
              {
                "value": "platform",
                "displayValue": "platform"
              },
              {
                "value": "savedMaxCount",
                "displayValue": "savedMaxCount"
              },
              {
                "value": "saveEvents",
                "displayValue": "saveEvents"
              },
              {
                "value": "saveParamsReferrerOncePerSession",
                "displayValue": "saveParamsReferrerOncePerSession"
              },
              {
                "value": "secureCookie",
                "displayValue": "secureCookie"
              },
              {
                "value": "sessionTimeout",
                "displayValue": "sessionTimeout"
              },
              {
                "value": "storage",
                "displayValue": "storage"
              },
              {
                "value": "trackingOptions",
                "displayValue": "trackingOptions"
              },
              {
                "value": "transport",
                "displayValue": "transport"
              },
              {
                "value": "unsetParamsReferrerOnNewSession",
                "displayValue": "unsetParamsReferrerOnNewSession"
              },
              {
                "value": "unsentKey",
                "displayValue": "unsentKey"
              },
              {
                "value": "unsentIdentifyKey",
                "displayValue": "unsentIdentifyKey"
              },
              {
                "value": "uploadBatchSize",
                "displayValue": "uploadBatchSize"
              },
              {
                "value": "headers",
                "displayValue": "headers"
              }
            ],
            "isUnique": true,
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ]
          },
          {
            "defaultValue": "",
            "displayName": "Option value",
            "name": "value",
            "type": "TEXT"
          }
        ],
        "newRowButtonText": "Add option",
        "enablingConditions": [
          {
            "paramName": "initOptions",
            "paramValue": "manual",
            "type": "EQUALS"
          }
        ],
        "help": "For each option, click the \u003cstrong\u003eAdd option\u003c/strong\u003e button. Select the option name from the drop-down list, and set the value to whatever you want the option to be. Boolean values (e.g. \u003cstrong\u003etrue\u003c/strong\u003e and \u003cstrong\u003efalse\u003c/strong\u003e) are automatically converted from strings to Booleans by the template code. Similarly, number values (e.g. \u003cstrong\u003e365\u003c/strong\u003e) are automatically converted to numbers by the template code. Functions, objects, and other non-string types need to be passed using a GTM variable, selected from the list."
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// APIs
const copyFromWindow = require('copyFromWindow');
const getType = require('getType');
const injectScript = require('injectScript');
const log = require('logToConsole');
const makeNumber = require('makeNumber');
const makeString = require('makeString');
const makeTableMap = require('makeTableMap');
const templateStorage = require('templateStorage');

// Constants
const INSTANCES_STORAGE_KEY = 'amplitude_instances';
const WRAPPER_VERSION = '2.0.2';
const JS_URL = 'https://cdn.jsdelivr.net/npm/@amplitude/amplitude-js-gtm@' + WRAPPER_VERSION + '/dist/index.js';
const LOG_PREFIX = '[Amplitude / GTM] ';
const WRAPPER_NAMESPACE = '_amplitude';

// Helpers

// Print a log message and set the tag to failed state
const fail = msg => {
  log(LOG_PREFIX + 'Error: ' + msg);
  return data.gtmOnFailure();
};

// Normalize the input and return it
const normalize = val => {
  if (val === 'null') return null;
  if (val === 'true' || val === true) return true;
  if (val === 'false' || val === false) return false;
  return makeNumber(val) || val;
};

// Split a string into an array and trim the constituents of leading and trailing whitespace
const stringToArrayAndTrim = str => str.split(',').map(n => makeString(n.trim()));

// Convenience method for logging calls to the wrapper
const callAmplitude = (cmd, arg1, arg2, arg3) => {
  _amplitude(instanceName + cmd, arg1, arg2, arg3);
};

let _amplitude;

// User input
const instanceName = data.instanceName ? data.instanceName + '.' : '';
const initUserId = data.initUserId || null;

// Build and normalize initialization options map
const manualOptions = data.initManualOptions && data.initManualOptions.length ? data.initManualOptions.map(opt => {
  return {
    key: opt.key,
    value: normalize(opt.value)
  };
}) : [];
const initOptions = (data.initOptions === 'manual' ? makeTableMap(manualOptions, 'key', 'value') : data.initOptions) || {};

// Configure for EU Data Residency
if (data.euData) {
  initOptions.serverZone = 'EU';
  initOptions.serverZoneBasedApi = true;
}

// Initialize the instance if necessary
const initializeInstance = () => {
  const instancesInStorage = templateStorage.getItem(INSTANCES_STORAGE_KEY) || [];
  if (instancesInStorage.indexOf(instanceName) === -1) {
    callAmplitude('init', data.apiKey, initUserId, initOptions);
    instancesInStorage.push(instanceName);
    templateStorage.setItem(INSTANCES_STORAGE_KEY, instancesInStorage);
  }
  return;
};

const onfailure = () => {
  return fail('Failed to load the Amplitude JavaScript library');
};

const onsuccess = () => {

  _amplitude = copyFromWindow(WRAPPER_NAMESPACE);
  if (!_amplitude) return fail('Failed to load the Amplitude namespace');

  initializeInstance();

  switch (data.type) {

    case 'event':
      const eventProperties = makeTableMap(data.eventProperties || [], 'name', 'value');

      // Convert comma-separated groupName into an array of groupNames
      const eventGroups = makeTableMap((data.eventGroups || []).map(group => {
        return {
          groupType: group.groupType,
          groupName: group.groupName.indexOf(',') > -1 ? stringToArrayAndTrim(group.groupName) : group.groupName
        };
      }), 'groupType', 'groupName');

      if (data.eventTimestamp) {
        callAmplitude('logEventWithTimestamp', data.eventType, eventProperties, normalize(data.eventTimestamp));
      } else if (data.eventGroups && data.eventGroups.length) {
        callAmplitude('logEventWithGroups', data.eventType, eventProperties, eventGroups);
      } else {
        callAmplitude('logEvent', data.eventType, eventProperties);
      }
      break;

    case 'revenue':
      const revenueObject = data.revenueVariable || {
        id: data.revenueId,
        price: data.revenuePrice,
        quantity: data.revenueQuantity || 1,
        revenueType: data.revenueType,
        eventProperties: makeTableMap(data.revenueEventProperties || [], 'name', 'value')
      };
      // Validate revenueObject
      if (!revenueObject.id || !revenueObject.price) return fail('Missing required "id" and/or "price" from the Revenue object');

      revenueObject.id = makeString(revenueObject.id);
      revenueObject.price = makeNumber(revenueObject.price);
      revenueObject.quantity = makeNumber(revenueObject.quantity);
      callAmplitude(data.type, revenueObject);
      break;

    case 'identify':
      const userProps = data.userPropertyOperations || [];
      callAmplitude('identify', userProps.map(op => {
        return [op.command, op.userProperty, normalize(op.value)];
      }));
      break;

    case 'setUserProperties':
      const props = makeTableMap(data.setUserProperties || [], 'name', 'value');
      callAmplitude(data.type, props);
      break;

    case 'setGroup':
      const groupName = data.groupName.indexOf(',') > -1 ? stringToArrayAndTrim(data.groupName) : data.groupName;
      callAmplitude(data.type, data.groupType, groupName);
      break;

    default:
      callAmplitude(data.type, normalize(data[data.type]));
      break;
  }

  data.gtmOnSuccess();
};

injectScript(JS_URL, onsuccess, onfailure, 'amplitude');


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_amplitude"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://cdn.jsdelivr.net/npm/@amplitude/amplitude-js-gtm*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_template_storage",
        "versionId": "1"
      },
      "param": []
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []
setup: ''


___NOTES___

Created on 27/10/2021, 18:34:01


